---
title: 아두이노 멀티탭 제어(소프트웨어)
date: 2026-02-20
categories: [Arduino, Multitab]
---

PC, 파이썬을 통해 제어
```python
from flask import Flask, request, jsonify
from flask_cors import CORS
import serial
import time

app = Flask(__name__)
CORS(app) 

try:
    ser = serial.Serial()
    ser.port = 'COM3'
    ser.baudrate = 9600

    ser.setDTR(False)
    ser.open()

except:
    ser = None
    print("아두이노 연결 상태를 확인하세요.")

# 아두이노에 명령을 보내고 응답(상태)을 읽어오는 함수
def get_arduino_state(command):
    if ser is not None:
        ser.reset_input_buffer() # 기존 버퍼 비우기
        ser.write(command.encode())
        time.sleep(0.1) # 아두이노가 응답할 시간 대기
        if ser.in_waiting > 0:
            # 아두이노가 보낸 'ON' 또는 'OFF' 텍스트를 읽어옴
            state = ser.readline().decode('utf-8').strip()
            return state
    return "UNKNOWN"

@app.route('/api/status', methods=['GET'])
def get_status():
    # '2'를 보내 실제 상태 조회
    actual_state = get_arduino_state('2')
    return jsonify({"status": "success", "state": actual_state})

@app.route('/api/control', methods=['GET'])
def control():
    cmd = request.args.get('cmd')
    
    if cmd in ['0', '1']:
        # '0' 또는 '1' 전송 후 변경된 상태 읽어옴
        actual_state = get_arduino_state(cmd)
        return jsonify({"status": "success", "state": actual_state})
            
    return jsonify({"status": "fail", "message": "Invalid command or Serial unconnected"})

if __name__ == '__main__':
    print("서버 시작.")
    app.run(host='0.0.0.0', port=5000)
```


프론트엔드는 vueJS로 구현
```vueJS

```
