---
title: MorpthTo 
date: 2026-02-05
categories: [Laravel, morphTo]
tag: [laravel]
mermaid: true
---

# MorphTo
`morphTo`는 라라벨의 Eloquent ORM에서 제공하는 **다형성 관계**를 구현할 때 사용하는 핵심 메서드이다.

`morphTo`는 **하나의 모델이 여러 종류의 다른 모델들에 속할 수 있게 하는 관계**이다.  
일반적인 `belongsTo`는 대상 테이블이 하나로 정해져 있지만, 다형성 관계에서는 하나의 테이블이 여러 테이블의 데이터를 참조할 수 있게 한다.

예로 `PointLog` 모델`(point_logs)`이 있다고 가정해 보자.  
이 `PointLog`에 입력되는 부모테이블은 사용자가 `Review`를 작성 시 참조할 수 있고,  
사용자가 제품 구매 시 `(Order)` 모델을 참조할 수 있다. 

만약 `morphTo`를 사용하지 않는다면, `PointLog` 모델에는 `Review` 모델을 참조하는 키인 `reviews_id`가 필요하고,  
`Order` 모델을 참조하는 `orders_id` 키가 필요할 것이다.  

이를 해결하기 위해 `mprphTo` 가 사용되는 것이다.

먼저 해야할 것은 `PointLog` 모델에 `reference` 용 칼럼을 추가하는 것이다.
어떤 모델(테이블)을 참조하는 지에 대한 `reference_type` 칼럼과, 해당 모델의 키를 나타내는 `reference_id`를 추가해 줘야 한다.

```sql
alter table point_logs 
 add column `reference_type` varchar(255) not null after `id`,
 add column `reference_id` bigint unsigned not null after `reference_type`,
 add index `point_log_reference_index` (`reference_type`, `reference_id`);
```

## Example
자식모델
```php
namespace App\Models;
use Illuminate\Database\Eloquent\Model;

class ExampleChildModel extends Model
{
  protected $table = 'example_child_models';
  public function reference()
  {
    return $this->morphTo();
  }
}
```


부모모델
```php
namespace App\Models;
use Illuminate\Database\Eloquent\Model;

class ExampleParentModelA extends Model
{
  protected $table = 'example_parent_model_as';
  public function exampleChildModel()
  {
    return $this->morphMany(ExampleChildModel::class, 'reference')
  }
}
```

```php
namespace App\Models;
use Illuminate\Database\Eloquent\Model;

class ExampleParentModelB extends Model
{
  protected $table = 'example_parent_model_bs';
  public function exampleChildModel()
  {
    return $this->morphMany(ExampleChildModel::class, 'reference')
  }
}
```
